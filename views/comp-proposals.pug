if (proposals.length)
  each proposal, index in proposals
    .row.ticket-card.mt-3.pt-3.pb-3.mb-3(onclick=`details(${JSON.stringify(proposal)})`, style="box-shadow: 0 .125rem .75rem rgba(0,0,0,.075); cursor: pointer;")
      .col-md-2.text-center.m-auto
        if proposal.proposalAccepted && proposal.isFinalized
          i.mdi.mdi-check.text-success.icon-lg
          br
          span.text-muted Accepted
        else if !proposal.proposalAccepted && proposal.isFinalized
          i.mdi.mdi-close.text-danger.icon-lg
          br
          span.text-muted Rejected
        else if !proposal.isFinalized
          i.mdi.mdi-loading.text-info.icon-lg.mdi-spin
          br
          span.text-muted Live
      .col-md-10.ticket-details
        .row
          .col-5.d-flex
            //p.text-dark.font-weight-semibold.mr-2.mb-0.no-wrap VoteID:
            p.text-primary.mr-1.mb-0 [##{proposal.KNWVoteID}]
            p.mb-0.ellipsis with #{parseFloat(proposal.participantsFor) + parseFloat(proposal.participantsAgainst)} participants
          .col-7.text-muted.text-right
            small
              | #{moment.unix(proposal.commitEndDate).format("HH:mm:s DD.MM.YYYY ")} - #{moment.unix(proposal.openEndDate).format("HH:mm:s DD.MM.YYYY ")}
              i.mdi.mdi-clock
        if(proposal.isFinalized)
          .progress(style="height: 20px;").summaryBar
            - var percentageFor = (proposal.votesFor / (proposal.votesFor + proposal.votesAgainst)) * 100
            - var percentageAgainst = (proposal.votesAgainst / (proposal.votesFor + proposal.votesAgainst)) * 100
            .progress-bar.progress-bar.bg-success(role='progressbar', style='width: ' + percentageFor + '%', aria-valuenow='' + percentageFor, aria-valuemin='0', aria-valuemax='100')
              span #{percentageFor.toFixed(2)}%
            .progress-bar.progress-bar.bg-danger(role='progressbar', style='width: ' + percentageAgainst + '%', aria-valuenow='' + percentageAgainst, aria-valuemin='0', aria-valuemax='100')
              span #{percentageAgainst.toFixed(2)}%
            .requiredSeparatorClip
              .requiredSeparatorWrapper(style='transform: translate3d(50%, 0px, 0px) scale3d(1, 1, 1);')
                .requiredSeparator
        else
          .progress(style="height: 20px;").summaryBar
            .progress-bar.progress-bar-striped.progress-bar-animated.bg-info(role='progressbar', style='width: 100%', aria-valuenow='100', aria-valuemin='0', aria-valuemax='100')
              span Vote is still in progress... Ending at #{moment.unix(proposal.openEndDate).format("HH:mm:s DD.MM.YYYY ")}
        p.text-right
          small.text-muted
            a.text-muted.small(href='https://github.com/' + proposal.repositoryName target="_blank") https://github.com/#{proposal.repositoryName} 
              i.mdi.mdi-link(href='https://github.com/' + proposal.repositoryName target="_blank")
.modal(tabindex='-1', role='dialog')
  .modal-dialog(role='document')
    .modal-content
      .modal-header
        h5.modal-title.text-primary.mr-1.mb-0 [#
          span#proposalID 0
          | ] 
          h5 Proposal details
        button.close(type='button', data-dismiss='modal', aria-label='Close')
          span(aria-hidden='true') Ã—
      .modal-body
        .text-center
        .row
          .col-xl-6.col-lg-6.col-md-6.col-sm-12.grid-margin.stretch-card
            .card.card-statistics
              .card-body
                .clearfix
                  .float-left
                    i.mdi.icon-lg#outcomeIcon
                  .float-right
                    p.mb-0.text-right Outcome
                    .fluid-container
                      h3.font-weight-medium.text-right.mb-0#outcome 0
          .col-xl-6.col-lg-6.col-md-6.col-sm-12.grid-margin.stretch-card
            .card.card-statistics
              .card-body
                .clearfix
                  .float-left
                    i.mdi.mdi-tag.icon-lg.text-info
                  .float-right
                    p.mb-0.text-right Label
                    .fluid-container
                      h6.font-weight-medium.text-right.mb-0#label 0
        .row
          .col-xl-12.col-lg-12.col-md-12.col-sm-12.grid-margin.stretch-card
            .card.card-statistics
              a#proposerLink(href='')
                .card-body
                  .clearfix
                    .float-left#proposerImage
                      i.mdi.mdi-account.icon-lg
                      img.rounded-circle(src="https://twitter.com/yannikgold/profile_image?size=bigger")
                    .float-right.w-75
                      p.mb-0.text-right Contributor
                      .fluid-container
                        h6.font-weight-medium.text-right.mb-0#proposer 0
        .row
          .col-xl-6.col-lg-6.col-md-6.col-sm-12.grid-margin.stretch-card
            .card.card-statistics
              .card-body
                .clearfix
                  .float-left
                    i.mdi.mdi-chart-bubble.icon-lg
                  .float-right
                    p.mb-0.text-right Stake
                    .fluid-container
                      h3.font-weight-medium.text-right.mb-0#stake 0
          .col-xl-6.col-lg-6.col-md-6.col-sm-12.grid-margin.stretch-card
            .card.card-statistics
              .card-body
                .clearfix
                  .float-left
                    i.mdi.mdi-finance.icon-lg
                  .float-right
                    p.mb-0.text-right Earned
                    .fluid-container
                      h3.font-weight-medium.text-right.mb-0#earned 0
        .row
          .col-xl-12.col-lg-12.col-md-12.col-sm-12.grid-margin.stretch-card
            .card.card-statistics
              a#repositoryLink(href='')
                .card-body
                  .clearfix
                    .float-left
                      i.mdi.mdi-folder.icon-lg
                    .float-right.w-75
                      p.mb-0.text-right Repository
                      .fluid-container
                        h6.font-weight-medium.text-right.mb-0#repository 0
        .row
          .col-xl-6.col-lg-6.col-md-6.col-sm-12.grid-margin.stretch-card.mb-0
            .card.card-statistics
              .card-body
                .clearfix
                  .float-left
                    i.mdi.mdi-thumb-up.text-success.icon-lg
                  .float-right
                    p.mb-0.text-right Votes for
                    .fluid-container
                      h3.font-weight-medium.text-right.mb-0#votesFor 0
                p.text-muted.mt-3.mb-0
                  i.mdi.mdi-account.mr-1(aria-hidden='true')
                  | by 
                  span#participantsFor
                  |  participants
          .col-xl-6.col-lg-6.col-md-6.col-sm-12.grid-margin.stretch-card.mb-0
            .card.card-statistics
              .card-body
                .clearfix
                  .float-left
                    i.mdi.mdi-thumb-down.text-danger.icon-lg
                  .float-right
                    p.mb-0.text-right Votes against
                    .fluid-container
                      h3.font-weight-medium.text-right.mb-0#votesAgainst 0
                p.text-muted.mt-3.mb-0
                  i.mdi.mdi-account.mr-1(aria-hidden='true')
                  | by 
                  span#participantsAgainst
                  |  participants
      //.modal-footer
        button.btn.btn-primary(type='button') Save changes
        button.btn.btn-secondary(type='button', data-dismiss='modal') Close
script.
  function details(proposal){
    if(proposal.isFinalized){
      $('#proposalID').text(proposal.KNWVoteID);
      $('#repository').text(proposal.repositoryName);
      $('#label').text(proposal.label);
      $('#stake').text(proposal.individualStake + " xDIT");
      $('#earned').text(proposal.numberOfKNW + " KNW");
      $('#votesFor').text(proposal.votesFor);
      $('#participantsFor').text(proposal.participantsFor);
      $('#votesAgainst').text(proposal.votesAgainst);
      $('#participantsAgainst').text(proposal.participantsAgainst);
    
      if(proposal.proposalAccepted){
        $('#outcomeIcon').removeClass('mdi-close text-danger');
        $('#outcomeIcon').addClass('mdi-check text-success');
        $('#outcome').text("Accepted");
      } else {
        $('#outcomeIcon').removeClass('mdi-check text-success');
        $('#outcomeIcon').addClass('mdi-close text-danger');
        $('#outcome').text("Rejected");
      }

      $('#proposerLink').attr("href", "/address/" + proposal.who);
      $('#repositoryLink').attr("href", "/repositories/" + proposal.repository);

      if(proposal.twitter){
        $('#proposer').text(proposal.twitter);
        $('#proposerImage > i').removeClass('mdi mdi-account icon-lg');
        $('#proposerImage > img').attr('src', 'https://twitter.com/' + proposal.twitter + '/profile_image?size=normal');
      } else {
        $('#proposer').text(proposal.who);
        $('#proposerImage > i').addClass('mdi mdi-account icon-lg');
        $('#proposerImage > img').attr('src', '');
      }
      
      $('.modal').modal('toggle');
    }
  }